<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The same model that was used for the synthesised data set is fitted to the
observed data set. The coefficients with confidence intervals for the
observed data are plotted together with their estimates from synthetic data.
When more than one synthetic data set has been generated (object$m&amp;gt;1),
combining rules are applied. Analysis-specific utility measures are used to
evaluate differences between synthetic and observed data."><title>Compare model estimates based on synthesised and observed data — compare.fit.synds • synthpop</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compare model estimates based on synthesised and observed data — compare.fit.synds"><meta property="og:description" content="The same model that was used for the synthesised data set is fitted to the
observed data set. The coefficients with confidence intervals for the
observed data are plotted together with their estimates from synthetic data.
When more than one synthetic data set has been generated (object$m&amp;gt;1),
combining rules are applied. Analysis-specific utility measures are used to
evaluate differences between synthetic and observed data."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">synthpop</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.8-2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Compare model estimates based on synthesised and observed data</h1>
      
      <div class="d-none name"><code>compare.fit.synds.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The same model that was used for the synthesised data set is fitted to the
observed data set. The coefficients with confidence intervals for the
observed data are plotted together with their estimates from synthetic data.
When more than one synthetic data set has been generated (<code>object$m&gt;1</code>),
combining rules are applied. Analysis-specific utility measures are used to
evaluate differences between synthetic and observed data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for fit.synds</span></span>
<span><span class="fu"><a href="compare.html">compare</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">data</span>, plot <span class="op">=</span> <span class="st">"Z"</span>,</span>
<span>  print.coef <span class="op">=</span> <span class="cn">FALSE</span>, return.plot <span class="op">=</span> <span class="cn">TRUE</span>, plot.intercept <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  lwd <span class="op">=</span> <span class="fl">1</span>, lty <span class="op">=</span> <span class="fl">1</span>, lcol <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#1A3C5A"</span>,<span class="st">"#4187BF"</span><span class="op">)</span>,</span>
<span>  dodge.height <span class="op">=</span> <span class="fl">.5</span>, point.size <span class="op">=</span> <span class="fl">2.5</span>,</span>
<span>  population.inference <span class="op">=</span> <span class="cn">FALSE</span>, ci.level <span class="op">=</span> <span class="fl">0.95</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for compare.fit.synds</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, print.coef <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">print.coef</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>An object of type <code>fit.synds</code> created by fitting a model
to a synthesised data set using function <code><a href="glm.synds.html">glm.synds</a></code> or
<code><a href="glm.synds.html">lm.synds</a></code>.</p></dd>


<dt>data</dt>
<dd><p>An original observed data set.</p></dd>


<dt>plot</dt>
<dd><p>Values to be plotted: <code>"Z"</code> (Z scores) or <code>"coef"</code>
(coefficients).</p></dd>


<dt>print.coef</dt>
<dd><p>A logical value determining whether tables of
estimates for the original and synthetic data should be printed.</p></dd>


<dt>return.plot</dt>
<dd><p>A logical value indicating whether a confidence interval
plot should be returned.</p></dd>


<dt>plot.intercept</dt>
<dd><p>A logical value indicating whether estimates for
intercept should be plotted.</p></dd>


<dt>lwd</dt>
<dd><p>The line type.</p></dd>


<dt>lty</dt>
<dd><p>The line width.</p></dd>


<dt>lcol</dt>
<dd><p>Line colours.</p></dd>


<dt>dodge.height</dt>
<dd><p>Size of vertical shifts for confidence intervals to
prevent overlapping.</p></dd>


<dt>point.size</dt>
<dd><p>Size of plotting symbols used to plot point estimates of
coefficients.</p></dd>


<dt>population.inference</dt>
<dd><p>A logical value indicating whether intervals for
inference to population quantities, as described by Karr et al. (2006),
should be calculated and plotted. This option suppresses the lack-of-fit
test and the standardised differences since these are based on differences
standardised by the original interval widths.</p></dd>


<dt>ci.level</dt>
<dd><p>Confidence interval coverage as a proportion.</p></dd>


<dt>...</dt>
<dd><p>Additional parameters passed to <code>ggplot</code>.</p></dd>


<dt>x</dt>
<dd><p>An object of class <code>compare.fit.synds</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<ul><li><p><strong>An object of class <code>compare.fit.synds</code> which is a list with the
following components:</strong></p><ul><li><p><code>call</code>: The original call to fit the model to the synthesised data set.</p></li>
<li><p><code>coef.obs</code>: A data frame including estimates based on the observed
data: coefficients (<code>Beta</code>), their standard errors (<code>se(Beta)</code>), and
Z scores (<code>Z</code>).</p></li>
<li><p><code>coef.syn</code>: A data frame including (combined) estimates based on the
synthesised data: point estimates of observed data coefficients
(<code>B.syn</code>), standard errors of those estimates (<code>se(B.syn)</code>), estimates
of the observed standard errors (<code>se(Beta).syn</code>), Z scores estimates
(<code>Z.syn</code>), and their standard errors (<code>se(Z.syn)</code>). Note that
<code>se(B.syn)</code> and <code>se(Z.syn)</code> give the standard errors of the mean of
the <code>m</code> syntheses and can be made very small by increasing <code>m</code> (see
the vignette on inference for more details).</p></li>
<li><p><code>coef.diff</code>: A data frame containing standardized differences between
the coefficients estimated from the original data and those calculated
from the combined synthetic data. The difference is standardized by
dividing by the estimated standard error of the fit from the original.
The corresponding p-values are calculated from a standard Normal
distribution and represent the probability of achieving differences
as large as those found if the model use for synthesis is compatible
with the model that generated the original data.</p></li>
<li><p><code>mean.abs.std.diff</code>: Mean absolute standardized difference (over all
coefficients).</p></li>
<li><p><code>ci.overlap</code>: A data frame containing the percentage of overlap between
the estimated synthetic confidence intervals and the original sample
confidence intervals for each parameter. When <code>population.inference = TRUE</code>, overlaps are calculated as suggested by Karr et al. (2006).
Otherwise, a simpler overlap measure with intervals of equal length is
calculated.</p></li>
<li><p><code>mean.ci.overlap</code>: Mean confidence interval overlap (over all
coefficients).</p></li>
<li><p><code>lack.of.fit</code>: Lack-of-fit measure from all <code>m</code> synthetic data sets
combined, calculated as follows, when <code>object$incomplete = FALSE</code>. The
vector of mean differences (<code>diff</code>) between the coefficients calculated
from the synthetic and original data provides a standardized
<code>lack-of-fit = t(diff) %*% V^(-1) t(diff)</code>, where <code>%*%</code> represents the
matrix product and <code>V^(-1)</code> is the inverse of the variance-covariance
matrix for the mean coefficients from the original data. If the model
used to synthesize the data is correct, this quantity, which is a
Mahalanobis distance measure, will follow a chi-squared distribution
with degrees of freedom, and thus expectation, equal to the number of
parameters (<code>p</code>) in the fitted model. When <code>object$incomplete = TRUE</code>,
the variance-covariance matrix of the coefficients is estimated from
the differences between the <code>m</code> estimates, and the lack-of-fit
statistic follows a Hotelling's <code>T*2</code> distribution, and the lack-of-fit
statistic is referred to as <code>F(p, m - p)</code>.</p></li>
<li><p><code>lof.pvalue</code>: P-value for the combined lack-of-fit test of the NULL
hypothesis that the method used for synthesis retains all relationships
between variables that influence the parameters of the fit.</p></li>
<li><p><code>ci.plot</code>: <code>ggplot</code> of the coefficients with confidence intervals for
models based on observed and synthetic data. If <code>return.plot</code> was set
to <code>FALSE</code>, then <code>ci.plot</code> is <code>NULL</code>.</p></li>
<li><p><code>print.coef</code>: A logical value determining whether tables of estimates
for the original and synthetic data should be printed.</p></li>
<li><p><code>m</code>: The number of synthetic versions of the original (observed) data.</p></li>
<li><p><code>ncoef</code>: The number of coefficients in the fitted model (including an
intercept).</p></li>
<li><p><code>incomplete</code>: Whether methods for incomplete synthesis due to Reiter
(2003) have been used in calculations.</p></li>
<li><p><code>population.inference</code>: Whether intervals as described by Karr et al.
(2016) have been calculated.</p></li>
</ul></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function can be used to evaluate whether the method used for
synthesis is appropriate for the fitted model. If this is the case, the
estimates from the synthetic data of what would be expected from the original
data <code>xpct(Beta)</code> <code>xpct(Z)</code> should not differ from the estimates
from the observed data (<code>Beta</code> and <code>Z</code>) by more than would be
expected from the standard errors (<code>se(Beta)</code> and <code>se(Z)</code>). For
more details see the vignette on inference.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Karr, A., Kohnen, C.N., Oganian, A., Reiter, J.P. and Sanil, A.P. (2006).
A framework for evaluating the utility of data altered to protect
confidentiality. <em>The American Statistician</em>, <b>60</b>(3), 224-232.</p>
<p>Nowok, B., Raab, G.M and Dibben, C. (2016). synthpop: Bespoke
creation of synthetic data in R. <em>Journal of Statistical Software</em>,
<b>74</b>(11), 1-26. <a href="https://doi.org/10.18637/jss.v074.i11" class="external-link">doi:10.18637/jss.v074.i11</a>
.</p>
<p>Reiter, J.P. (2003) Inference for partially synthetic, public use microdata
sets. <em>Survey Methodology</em>, <b>29</b>, 181-188.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="summary.fit.synds.html">summary.fit.synds</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">ods</span> <span class="op">&lt;-</span> <span class="va">SD2011</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"age"</span>, <span class="st">"edu"</span>, <span class="st">"smoke"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="syn.html">syn</a></span><span class="op">(</span><span class="va">ods</span>, m <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu"><a href="glm.synds.html">glm.synds</a></span><span class="op">(</span><span class="va">smoke</span> <span class="op">~</span> <span class="va">sex</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">edu</span>, data <span class="op">=</span> <span class="va">s1</span>, family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="compare.html">compare</a></span><span class="op">(</span><span class="va">f1</span>, <span class="va">ods</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="compare.html">compare</a></span><span class="op">(</span><span class="va">f1</span>, <span class="va">ods</span>, print.coef <span class="op">=</span> <span class="cn">TRUE</span>, plot <span class="op">=</span> <span class="st">"coef"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Beata Nowok.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

